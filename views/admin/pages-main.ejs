<!doctype html>
<html lang="en">
    <head>
        <% include ./admin-head %>
        <title>Admin | Pages</title>
    </head>

    <body>
        <div id="main-menu" class="slideout-right">
            <div class="slideout-top">
                <i id="close-menu" class="fa fa-2x fa-chevron-circle-left rotatable" aria-hidden="true"></i>
                <span>Options</span>
            </div>
            <div class="slideout-main" id="slideout-main">
                <a href="/<%=sitename%>/admin/pages">Pages</a>
                <a href="/<%=sitename%>/logout">Log Out</a>
            </div>
        </div>
        <div class="container-fluid admin-flex-wrapper">
            <% include ./admin-nav %>
            <div class="row admin-main">
                <h1 class="admin-h1">Choose a page to edit</h1>
                <div class="pagelist-wrapper">
                    
                    <div class="pagelist-instructions">
                        Your available pages are below.  Click the edit icon to edit the basic info about the page (title, password protection, etc).  Click the arrow icon to view the page contents and edit text, pictures, layout, and the menu.
                    </div>
                    <ul>
                        <% for(var i = 0; i < pageList.length; i += 1) { %>
                            <li>
                                <h3><%= pageList[i].title %></h3>
                                <div class="pagelist-main">
                                    Page desc of some kind?
                                </div>
                                <div class="pagelist-links">
                                    <a id="edit-page-basics" data-pageid="<%= pageList[i].page_id %>">Edit Page Basics</a>
                                    <a href="pages/<%= pageList[i].page_id %>">Edit Page Content</a>
                                </div>
                            </li>
                        <% } %>
                        <li>
                            <a id="create-new-page">Create New Page</a>
                        </li>
                    </ul>
            </div>
            <div class="row admin-footer">
                Admin Footer links here
            </div>
        </div>

        <!--Slideout/modal background-->
        <div id="bg-screen" class="bg-screen"></div>
    </body>
    <% include ./scripts-admin %>
    <script>
        $(document).ready(function() {
            var openMenuButton = document.querySelector('#open-menu');
            var closeMenuButton = document.querySelector('#close-menu');
            var menu = document.querySelector('#main-menu');
            var bg = document.querySelector('#bg-screen');
            // var switchPageSelect = document.querySelector('#switch-page');

            // switchPageSelect.addEventListener('change', function(evt) {
            //     var pathArr = window.location.pathname.split('/');
            //     pathArr[4] = evt.target.value;
            //     var newPath = window.location.origin + pathArr.join('/');
            //     window.location = newPath;
            // });

            openMenuButton.addEventListener('click', function() {
                console.log('open menu');
                menu.classList.add('slideout-right--show');
                bg.classList.add('bg-show');
                closeMenuButton.classList.add('menu-open');
            });

            [closeMenuButton, bg].forEach(function(element) {
                element.addEventListener('click', function() {
                    menu.classList.remove('slideout-right--show');
                    bg.classList.remove('bg-show');
                    closeMenuButton.classList.remove('menu-open');
                });
            });
        });
    </script>
</html>